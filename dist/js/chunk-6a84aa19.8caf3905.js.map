{"version":3,"sources":["webpack:///./src/views/EditPortfolio.vue?a447","webpack:///src/views/EditPortfolio.vue","webpack:///./src/views/EditPortfolio.vue?e2f0","webpack:///./src/views/EditPortfolio.vue","webpack:///./src/views/EditPortfolio.vue?defb","webpack:///./node_modules/@babel/runtime/helpers/esm/defineProperty.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticStyle","_v","_e","error","staticClass","fetchLoading","oldImage","ref","on","$event","stopPropagation","preventDefault","handleSubmit","titleState","model","value","callback","$$v","title","expression","content","options","processEditOperation","coverImageState","coverImageUrl","keywords","onSubmit","editLoading","staticRenderFns","data","buttonLabels","toolbar","buttons","extensions","table","MediumEditorTable","placeholder","components","computed","length","created","component","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable"],"mappings":"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","file":"js/chunk-6a84aa19.8caf3905.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"editblog\"}},[_c('b-container',[(_vm.error)?_c('b-row',[_c('b-card-text',{staticStyle:{\"color\":\"white\"}},[_vm._v(\"Error fetching blog.\")])],1):_vm._e(),(!_vm.error)?_c('b-row',[(_vm.fetchLoading)?_c('b-col',{staticClass:\"d-flex flex-column align-items-center justify-content-center\"},[_c('b-spinner',{attrs:{\"variant\":\"success\"}})],1):_vm._e(),(!_vm.fetchLoading)?_c('b-col',{staticClass:\"d-flex flex-column align-items-center justify-content-center\"},[_c('b-card',{staticClass:\"mb-2\",staticStyle:{\"max-width\":\"40rem\",\"width\":\"100%\"},attrs:{\"img-alt\":\"Image\",\"img-src\":_vm.oldImage,\"tag\":\"article\"}},[_c('form',{ref:\"form\",on:{\"submit\":function($event){$event.stopPropagation();$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('b-form-group',{attrs:{\"state\":_vm.titleState,\"label\":\"Title: \",\"label-for\":\"name-input\",\"invalid-feedback\":\"You need to enter a title\"}},[_c('b-form-input',{attrs:{\"id\":\"name-input\",\"state\":_vm.titleState,\"required\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Content: \",\"label-for\":\"content-input\"}},[_c('medium-editor',{attrs:{\"text\":_vm.content,\"options\":_vm.options,\"custom-tag\":\"div\"},on:{\"edit\":_vm.processEditOperation}})],1),_c('b-form-group',{attrs:{\"state\":_vm.coverImageState,\"label\":\"Cover Image:(Leave blank not to change current) \",\"label-for\":\"cover-image-input\"}},[_c('b-form-file',{attrs:{\"id\":\"cover-image-input\",\"accept\":\"image/*\",\"browse-text\":\"Select\",\"placeholder\":\"Select or drag an image\",\"drop-placeholder\":\"You can drop\"},model:{value:(_vm.coverImageUrl),callback:function ($$v) {_vm.coverImageUrl=$$v},expression:\"coverImageUrl\"}})],1),_c('b-form-group',{attrs:{\"label\":\"Keywords: \",\"label-for\":\"keywords-input\",\"invalid-feedback\":\"Enter keywords comma-seperated \"}},[_c('b-form-tags',{attrs:{\"id\":\"keywords-input\",\"tag-pills\":\"\",\"tag-variant\":\"primary\",\"remove-on-delete\":\"\",\"separator\":\",\",\"duplicate-tag-text\":\"Same keyword entered\",\"placeholder\":\"Add via pressing enter or comma\"},model:{value:(_vm.keywords),callback:function ($$v) {_vm.keywords=$$v},expression:\"keywords\"}})],1)],1),_c('b-button-group',[_c('b-button',{staticClass:\"mr-2\",attrs:{\"variant\":\"success\"},on:{\"click\":function($event){$event.preventDefault();return _vm.onSubmit($event)}}},[(_vm.editLoading)?_c('b-spinner',{attrs:{\"variant\":\"danger\",\"small\":\"\"}}):_vm._e(),(!_vm.editLoading)?_c('span',[_vm._v(\"Submit\")]):_vm._e()],1),_c('b-button',{attrs:{\"to\":\"/blog\",\"variant\":\"danger\"}},[_vm._v(\"Back\")])],1)],1)],1):_vm._e()],1):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"editblog\">\n    <b-container>\n      <b-row v-if=\"error\">\n        <b-card-text style=\"color: white;\">Error fetching blog.</b-card-text>\n      </b-row>\n      <b-row v-if=\"!error\">\n        <b-col\n          class=\"d-flex flex-column align-items-center justify-content-center\"\n          v-if=\"fetchLoading\"\n        >\n          <b-spinner variant=\"success\"></b-spinner>\n        </b-col>\n        <b-col\n          v-if=\"!fetchLoading\"\n          class=\"d-flex flex-column align-items-center justify-content-center\"\n        >\n          <b-card\n            img-alt=\"Image\"\n            :img-src=\"oldImage\"\n            tag=\"article\"\n            class=\"mb-2\"\n            style=\"max-width: 40rem; width:100%;\"\n          >\n            <form ref=\"form\" @submit.stop.prevent=\"handleSubmit\">\n              <b-form-group\n                :state=\"titleState\"\n                label=\"Title: \"\n                label-for=\"name-input\"\n                invalid-feedback=\"You need to enter a title\"\n              >\n                <b-form-input id=\"name-input\" v-model=\"title\" :state=\"titleState\" required></b-form-input>\n              </b-form-group>\n              <b-form-group label=\"Content: \" label-for=\"content-input\">\n                <medium-editor\n                  :text=\"content\"\n                  :options=\"options\"\n                  v-on:edit=\"processEditOperation\"\n                  custom-tag=\"div\"\n                />\n              </b-form-group>\n              <b-form-group\n                :state=\"coverImageState\"\n                label=\"Cover Image:(Leave blank not to change current) \"\n                label-for=\"cover-image-input\"\n              >\n                <b-form-file\n                  id=\"cover-image-input\"\n                  accept=\"image/*\"\n                  browse-text=\"Select\"\n                  placeholder=\"Select or drag an image\"\n                  drop-placeholder=\"You can drop\"\n                  v-model=\"coverImageUrl\"\n                ></b-form-file>\n              </b-form-group>\n              <b-form-group\n                label=\"Keywords: \"\n                label-for=\"keywords-input\"\n                invalid-feedback=\"Enter keywords comma-seperated \"\n              >\n                <b-form-tags\n                  id=\"keywords-input\"\n                  tag-pills\n                  tag-variant=\"primary\"\n                  remove-on-delete\n                  separator=\",\"\n                  duplicate-tag-text=\"Same keyword entered\"\n                  placeholder=\"Add via pressing enter or comma\"\n                  v-model=\"keywords\"\n                ></b-form-tags>\n              </b-form-group>\n            </form>\n            <b-button-group>\n              <b-button class=\"mr-2\" @click.prevent=\"onSubmit\" variant=\"success\">\n                <b-spinner variant=\"danger\" v-if=\"editLoading\" small></b-spinner>\n                <span v-if=\"!editLoading\">Submit</span>\n              </b-button>\n              <b-button to=\"/blog\" variant=\"danger\">Back</b-button>\n            </b-button-group>\n          </b-card>\n        </b-col>\n      </b-row>\n    </b-container>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport editor from \"vue2-medium-editor\";\nimport store from \"../store/index\";\nexport default {\n  data: function() {\n    return {\n      options: {\n        buttonLabels: \"fontawesome\",\n        toolbar: {\n          buttons: [\n            \"h1\",\n            \"h2\",\n            \"h3\",\n            \"anchor\",\n            \"bold\",\n            \"italic\",\n            \"unorderedlist\",\n            \"orderedlist\",\n            \"table\"\n          ]\n        },\n        extensions: {\n          table: new MediumEditorTable()\n        },\n        placeholder: false\n      },\n      error: false,\n      content: \"\",\n      keywords: [],\n      title: \"\",\n      coverImageUrl: null,\n      oldImage: \"\",\n      editLoading: false,\n      fetchLoading: false\n    };\n  },\n  components: {\n    \"medium-editor\": editor\n  },\n  computed: {\n    titleState() {\n      return this.title.length > 0;\n    }\n  },\n  created() {\n    this.fetchLoading = true;\n    axios\n      .get(\"/blog/blogEntries/\" + this.$route.params.id)\n      .then(res => {\n        this.title = res.data.blogEntry.title;\n        this.content = res.data.blogEntry.content;\n        this.oldImage = res.data.blogEntry.coverImageUrl;\n        this.keywords = res.data.blogEntry.keywords;\n        this.fetchLoading = false;\n      })\n      .catch(err => {\n        if (err.response) {\n          if (\n            err.response.data.error.statusCode == 422 &&\n            err.response.data.error.problems.length > 0\n          ) {\n            let s = \"\";\n            err.response.data.error.problems.forEach(x => {\n              s += \" * \" + x.msg;\n            });\n            this.$bvToast.toast(err.response.data.message + \":     \" + s);\n          } else {\n            this.$bvToast.toast(err.response.data.message);\n          }\n        } else {\n          this.$bvToast.toast(\"An error occured: \" + JSON.stringify(err));\n        }\n        this.error = true;\n        this.fetchLoading = false;\n      });\n  },\n  components: {\n    \"medium-editor\": editor\n  },\n  methods: {\n    toBase64(file) {\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.readAsDataURL(file);\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = error => reject(error);\n      });\n    },\n    processEditOperation(operation) {\n      this.content = operation.api.origElements.innerHTML;\n    },\n    checkFormValidity() {\n      const valid = this.$refs.form.checkValidity();\n      return valid;\n    },\n    async onSubmit() {\n      if (!this.checkFormValidity()) {\n        return;\n      }\n      this.editLoading = true;\n      if (this.coverImageUrl == null) {\n        axios\n          .put(\"/blog/editBlogEntry/\" + this.$route.params.id, {\n            content: this.content,\n            coverImageUrl: this.oldImage,\n            title: this.title,\n            keywords: this.keywords\n          })\n          .then(res => {\n            store.commit(\"editBlog\", {\n              _id: this.$route.params.id,\n              content: this.content,\n              title: this.title,\n              keywords: this.keywords\n            });\n            this.$bvToast.toast(res.data.message);\n            this.editLoading = false;\n          })\n          .catch(err => {\n            if (err.response) {\n              if (\n                err.response.data.error.statusCode == 422 &&\n                err.response.data.error.problems.length > 0\n              ) {\n                let s = \"\";\n                err.response.data.error.problems.forEach(x => {\n                  s += \" * \" + x.msg;\n                });\n                this.$bvToast.toast(err.response.data.message + \":     \" + s);\n              } else {\n                this.$bvToast.toast(err.response.data.message);\n              }\n            } else {\n              this.$bvToast.toast(\"An error occured: \" + JSON.stringify(err));\n            }\n            this.editLoading = false;\n          });\n      } else {\n        let coverImageBase64;\n        try {\n          coverImageBase64 = await this.toBase64(this.coverImageUrl);\n        } catch (error) {\n          this.$bvToast.toast(\"An error occured: \" + JSON.stringify(error));\n          this.editLoading = false;\n          return;\n        }\n        axios\n          .put(\"/blog/editBlogEntry/\" + this.$route.params.id, {\n            content: this.content,\n            coverImageUrl: coverImageBase64,\n            title: this.title,\n            keywords: this.keywords\n          })\n          .then(res => {\n            store.commit(\"editBlogChangeCover\", {\n              _id: this.$route.params.id,\n              content: this.content,\n              title: this.title,\n              coverImageUrl: this.coverImageUrl,\n              keywords: this.keywords\n            });\n            this.$bvToast.toast(res.data.message);\n            this.oldImage = coverImageBase64;\n            this.editLoading = false;\n          })\n          .catch(err => {\n            if (err.response) {\n              if (\n                err.response.data.error.statusCode == 422 &&\n                err.response.data.error.problems.length > 0\n              ) {\n                let s = \"\";\n                err.response.data.error.problems.forEach(x => {\n                  s += \" * \" + x.msg;\n                });\n                this.$bvToast.toast(err.response.data.message + \":     \" + s);\n              } else {\n                this.$bvToast.toast(err.response.data.message);\n              }\n            } else {\n              this.$bvToast.toast(\"An error occured: \" + JSON.stringify(err));\n            }\n            this.editLoading = false;\n          });\n      }\n    }\n  }\n};\n</script>\n\n<style>\n#editblog {\n  width: 90%;\n}\nimg {\n  width: 100%;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortfolio.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortfolio.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditPortfolio.vue?vue&type=template&id=71e61009&\"\nimport script from \"./EditPortfolio.vue?vue&type=script&lang=js&\"\nexport * from \"./EditPortfolio.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditPortfolio.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortfolio.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditPortfolio.vue?vue&type=style&index=0&lang=css&\"","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}"],"sourceRoot":""}